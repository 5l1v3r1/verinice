<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<p:ajaxExceptionHandler type="java.lang.Exception"
		update="exceptionDialog" onexception="PF('exceptionDialog').show();" />

	<p:ajaxExceptionHandler
		type="javax.faces.application.ViewExpiredException"
		update="exceptionDialog" onexception="PF('exceptionDialog').show();" />

	<p:ajaxExceptionHandler type="java.lang.NullPointerException"
		update="exceptionDialog" onexception="PF('exceptionDialog').show();" />


	<p:dialog id="exceptionDialog"
		header="Exception: #{pfExceptionHandler.type} occured!"
		widgetVar="exceptionDialog" height="500px">
		<p:panelGrid column="2">
			<p:row>
				<p:column>Message:</p:column>
				<p:column>#{pfExceptionHandler.message}</p:column>
			</p:row>

			<p:row>
				<p:column>StackTrace:</p:column>
				<p:column>
					<h:outputText value="#{pfExceptionHandler.formattedStackTrace}"
						escape="false" />
				</p:column>
			</p:row>
			<p:row>
				<p:column colspan="2">
					<p:button style="width: 100%;"
						onclick="document.location.href = document.location.href;"
						rendered="#{pfExceptionHandler.type == 'javax.faces.application.ViewExpiredException'}"
						value="Reload!" icon="fa fa-refresh" />
				</p:column>
			</p:row>
		</p:panelGrid>
	</p:dialog>
</ui:composition>